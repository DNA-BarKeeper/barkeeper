<% provide(:title, @family.name) %>
<%= show_val_errors(@family)%>

<div class="panel panel-default">

  <div class="panel-heading">
    <h3 class="panel-title"><%= @family.name %></h3>
  </div>

  <div class="panel-body">
    <%= form_for(@family) do |f| %>

        <!-- Nav tabs -->
        <ul class="nav nav-tabs" role="tablist">
          <li class="active"><a href="#description" role="tab" data-toggle="tab">Description</a></li>
          <li><a href="#assigned_species" role="tab" data-toggle="tab">Species</a></li>
        </ul>

        <!-- Tab panes -->
        <div class="tab-content">

          <div class="tab-pane active" id="description">
            <br>
            <div class="form-group">
              <%= f.label :name %>
              <%= f.text_field :name,  class: 'form-control' %>
            </div>

            <div class="form-group">
              <%= f.label :author %>
              <%= f.text_field :author, class: 'form-control' %>
            </div>

            <div class="form-group">
              <%= f.label 'Order' %>
              <%= f.collection_select(:order_id, Order.order(:name).all, :id, :name, {}, { class: 'form-control' }) %>
            </div>

            <div class="form-group">
              <%= f.label :projects, 'Projects this object belongs to' %>
              <%= project_list(@family) %>
            </div>
          </div>

          <div class="tab-pane" id="assigned_species">
            <!-- Do not show species while creating families-->
            <% if @family.id %>
              <br>
                <div class="wideTable">
                  <table id="species" data-source="<%= show_species_family_url(format: "json") %>" class="table table-striped table-hover table-bordered">
                    <thead>
                      <tr>
                        <th>Species</th>
                        <th>Author</th>
                        <th>Family</th>
                        <th>Last Updated</th>
                        <th></th>
                      </tr>
                    </thead>
                    <tbody>
                    </tbody>
                  </table>
                </div>
            <% end %>
          </div>

        </div>

        <%= f.submit 'Update', :class => 'btn btn-default' %>

    <% end %>
  </div>
</div>
