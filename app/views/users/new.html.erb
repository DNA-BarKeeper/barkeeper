<%= show_val_errors(@user)%>

<div class="panel panel-default">
  <h4>Create user</h4>

  <div class="panel-body">
    <%= form_for @user, url: create_user_path do |f| %>

      <div class="form-group">
        <%= f.label :name %>
        <%= f.text_field :name, class: 'form-control' %>
      </div>

      <div class="form-group">
        <%= f.label :email %>
        <%= f.text_field :email, class: 'form-control' %>
      </div>

      <div class="form-group">
        <%= f.label :password %>
        <%= f.text_field :password, class: 'form-control' %>
      </div>

      <div class="form-group">
        <%= f.label :password_confirmation %>
        <%= f.text_field :password_confirmation, class: 'form-control' %>
      </div>

      <div class="form-group">
        <% roles = current_user.admin? ? User.roles.keys : User.roles.keys.reject {|role| role == 'admin'} %>
        <% roles.each do |role| %>
          <%= f.radio_button :role, role %>
          <%= f.label role.to_sym %>
        <% end %>
      </div>

      <div class="form-group">
        <%= f.label 'Responsibility' %><br>
        <%= f.collection_select :responsibility_ids, Responsibility.order(:name), :id, :name, {include_blank:'None specified'}, { multiple:true } %>
      </div>

      <div class="form-actions">
        <%= f.button :submit %>
      </div>

    <% end %>
  </div>
</div>